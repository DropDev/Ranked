<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>BO7 Ranked Overlay</title>
<style>
body { margin:0; background:transparent; font-family:'Arial Black',sans-serif; }
#container {
  display:flex;
  align-items:center;
  padding:20px 30px;
  background:linear-gradient(135deg, rgba(10,10,15,0.65), rgba(25,25,35,0.75));
  border-radius:20px;
  backdrop-filter:blur(10px);
  position:fixed;
  bottom:50px;
  left:50px;
  z-index:9999;
}
#badge { width:180px; height:180px; margin-right:25px; transition:all 0.4s ease; }
.rank { font-size:36px; color:white; letter-spacing:2px; }
.sr {
  font-size:64px; font-weight:bold;
  color:#ffffff;
  text-shadow: 0 0 10px #00ff88,0 0 20px #00ff88,0 0 30px #00ff88;
  animation: glowPulse 2s infinite alternate;
  margin-bottom:10px;
}
@keyframes glowPulse {
  0% { text-shadow:0 0 10px #00ff88,0 0 20px #00ff88,0 0 30px #00ff88;color:#ffffff;}
  50% { text-shadow:0 0 20px #00ff88,0 0 40px #00ff88,0 0 60px #00ff88;color:#aaffaa;}
  100% { text-shadow:0 0 10px #00ff88,0 0 20px #00ff88,0 0 30px #00ff88;color:#ffffff;}
}
#dailyChange { font-size:32px; font-weight:bold; margin-top:5px; }
.iridescent { animation: shimmer 3s infinite linear; }
@keyframes shimmer {
  0% { filter: hue-rotate(0deg) drop-shadow(0 0 20px #00ffff);}
  50% { filter: hue-rotate(180deg) drop-shadow(0 0 30px #ff00ff);}
  100% { filter: hue-rotate(360deg) drop-shadow(0 0 20px #00ffff);}
}
</style>
</head>
<body>
<div id="container">
  <img id="badge" src="BO7/bronze.png">
  <div>
    <div class="rank" id="rankText">BRONZE I</div>
    <div class="sr" id="srText">0 SR</div>
    <div id="dailyChange" style="display:none;">Daily SR Change: 0</div>
  </div>
</div>

<script>
let startSR = null; // null means hidden
let currentSR = 1;

// Rank definitions
function getRankData(sr) {
  const ranks = [
    {min:1,name:"BRONZE I",badge:"BO7/bronze.png"},
    {min:300,name:"BRONZE II",badge:"BO7/bronze.png"},
    {min:600,name:"BRONZE III",badge:"badges/bronze.png"},
    {min:900,name:"SILVER I",badge:"badges/silver.png"},
    {min:1300,name:"SILVER II",badge:"badges/silver.png"},
    {min:1700,name:"SILVER III",badge:"badges/silver.png"},
    {min:2100,name:"GOLD I",badge:"badges/gold.png"},
    {min:2600,name:"GOLD II",badge:"badges/gold.png"},
    {min:1000000000,name:"GOLD III",badge:"badges/gold.png"},
    {min:3600,name:"PLATINUM I",badge:"badges/platinum.png"},
    {min:1000000000,name:"PLATINUM II",badge:"badges/platinum.png"},
    {min:1000000000,name:"PLATINUM III",badge:"badges/platinum.png"},
    {min:5400,name:"DIAMOND I",badge:"badges/diamond.png"},
    {min:1000000000,name:"DIAMOND II",badge:"badges/diamond.png"},
    {min:1000000000,name:"DIAMOND III",badge:"badges/diamond.png"},
    {min:7500,name:"CRIMSON I",badge:"badges/crimson.png"},
    {min:8300,name:"CRIMSON II",badge:"badges/crimson.png"},
    {min:1000000000,name:"CRIMSON III",badge:"badges/crimson.png"},
    {min:10000,name:"IRIDESCENT",badge:"badges/iridescent.png"},
    {min:14000,name:"TOP 250",badge:"badges/top250.png"}
  ];
  let current = ranks[0];
  for(let i=0;i<ranks.length;i++){if(sr>=ranks[i].min){current=ranks[i];}}
  return current;
}

// Update SR, rank, badge, and daily change if startSR exists
function updateSR(newSR){
  const srElement = document.getElementById("srText");
  const badge = document.getElementById("badge");
  const rankText = document.getElementById("rankText");
  const dailyEl = document.getElementById("dailyChange");

  currentSR = newSR;
  const rankData = getRankData(newSR);

  srElement.innerText = newSR + " SR";
  rankText.innerText = rankData.name;
  badge.src = rankData.badge;

  if(rankData.name==="IRIDESCENT"||rankData.name==="TOP 250"){
    badge.classList.add("iridescent");
  } else {
    badge.classList.remove("iridescent");
  }

  // Only show daily change if startSR exists
  if(startSR !== null){
    const dailyChange = currentSR - startSR;
    dailyEl.style.display="block";
    dailyEl.innerText = "Daily SR Change: " + (dailyChange>=0?"+":"") + dailyChange;
    dailyEl.style.color = dailyChange>=0 ? "#00ff88" : "#ff3355";
  } else {
    dailyEl.style.display="none";
  }
}

// --- Read URL parameters ---
const params = new URLSearchParams(window.location.search);
const startParam = params.get('startSR');
const srParam = params.get('sr');

startSR = startParam ? parseInt(startParam) : null;
const srValue = srParam ? parseInt(srParam) : (startSR!==null ? startSR : 0);

updateSR(srValue);
</script>
</body>
</html>